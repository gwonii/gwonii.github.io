---
layout: article
title: JSON 파헤치기...
tags:
- Programming Basic
article_header:
  type: overlay
  theme: dark
  background_color: '#123'
  background_image: false


---

오늘의 굴욕을 잊지말자. JSON을 모른다고? 제정신이 아니군

<!--more-->

# JSON 파헤치기… 



## 개요 

이번에 클라이언트 API를 작업하는 과정에서 혼란이 생겼다.

- **Method** : POST

**Argument**

| **Parameter** | **type** | **설명**                                   |
| ------------- | -------- | ---------------------------------------- |
| badgeMenu     | String   | "APPROVAL" / "MAIL" / "SURVEY" / "CHAT" / "NOTIFICATION" ※대문자 |
| useNoti       | Boolean  | 메뉴별로 앱 아이콘에 표시할지 여부 true/false           |

```swift
[{ 
  "badgeMenu" : "APPROVAL",
  "useNoti" : false
}, {
  "badgeMenu" : "MAIL",
  "useNoti" : false
}, {
  "badgeMenu" : "SURVEY",
  "useNoti" : true
}, {
  "badgeMenu" : "CHAT",
  "useNoti" : true
}, {
  "badgeMenu" : "NOTIFICATION",
  "useNoti" : true
}]
```



위의 예시에 맞게 post를 할 때, body에 위 배열을 담아서 보내야 했다. 처음엔 이전에 했던 방식으로 

```swift
struct BadgeData: Codable {
  badgeMenu: String
  useNoti: Bool
}
```

객체를 이용해서 **[BadgeData]**를 **Parameter ( [String: Bool] )** 로 변환시켜 request body에 넣어 api를 만들려고 했다. 하지만 원하는대로 작동하지 않았다. 

결국 문제를 해결하지 못하고 사수한테 질문을 하게 되었다. " 위 모양대로 **Parameters**로 변환이 안되는데 뭐가 문제일까요…? "

그리고 사수는 말씀하셨다. 

---

**사수**:  **JSON**으로 만들지말고 그냥 **Data**타입으로 그냥 담아서 보내는게 어떨까요?

**나**: 예...? 

**사수**: JSON이 뭐에요

**나**: 예..? 그게… 데이터를 보내는 약속 같은… 

**사수**: JSON의 약자가 뭐에요 

**나**: 음 .. 그게.. (속마음) 갑자기 그렇게 물어보시면 몰라요… ㅠ 

---

그리고 사수는 다시 얘기를 시작했다. 

---

**사수**: JSON은 기본적으로 **Key - Value**로 되어 있어요 근데 위에 예시는 그냥 배열로 담겨져 있잖아요. 저건 **Parameters**로 변환할 수 없어요. 

---

그랬다… 처음부터 저건 JSON형태가 아닌 것이었다. 

나는 그것도 모르고 그냥 삽질을 하면서 이틀을 보냈다. 씁…. 

이 기회를 삼아 간단하게 다시 JSON을 정리하고자 한다!! 울지말자 화이팅! 



## 정의 

**JSON**: `JavaScript Object Notation`

직역하자면, **자바스크립트 객체 표기법**

말 그대로 자바스크립트에서 객체를 표기하는 방법이다. 그 표현 방법이 개발자가 보기기에도 가독성이 높고 컴퓨터가 이해할 수 있는 바이너리 처리를 하는데도 수월해서 다른 언어군에서도 데이터를 전달하는 표준으로 사용하고 있다. 



## 특징 

JSON은 **Key - Value**의 형태를 가지고 있다. 

value 값으로는 

1. Number
2. String
3. Boolean
4. Object
5. Array
6. NULL

을 가질 수 있다. 



**예시1)**

```swift
// Object 
struct Person: Codable {
	name: String = “호권”
	age: Int = “28”
	subName: String = “호떡”
	enName: String = “gwonii”
}

// JSON
{
	“name” : “호권”,
	“age” : 28,
	“subName” : “호떡”,
	“enName” : “gwonii”
}
```

 위의 Person 객체를 JSON의 형태로 만들면 밑에 처럼 { }을 이용해서 표현할 수 있다. 

일반적으로 

**객체**는 { } 중괄호로 둘러쌓아 표현한다. 

**배열**은 [ ] 대괄호로 둘러쌓아 표현한다.

그리고 데이터는 , (쉼표) 를 통해 구분한다. 



## 돌아보기 

여기서 처음 개요의 문제를 다시 돌아보면, 

```swift
{
"badge" : [{ 
  	"badgeMenu" : "APPROVAL",
  	"useNoti" : false
	}, {
  	"badgeMenu" : "MAIL",
  	"useNoti" : false
	}, {
  	"badgeMenu" : "SURVEY",
  	"useNoti" : true
	}, {
  	"badgeMenu" : "CHAT",
  	"useNoti" : true
	}, {
  	"badgeMenu" : "NOTIFICATION",
  	"useNoti" : true
  }]
}
```

의 형태로 만들어졌다면, 쉽게 JSON 형태로 request body에 담아 API post를 잘 할 수 있었을 것이다. 

하지만 배열에 key값이 없기에 JSON 형태의 key - value로 표현할 수가 없다. 



## 해결방법

그래서 [ [String: Any] ] 를 **Parameters**로 변환할 수 있는 방법을 찾아보았다. 문제를 해결하면 내용을 추가하려고 한다. 



## PS

새벽에 글을 쓰려고 하니 앞이 흐릿하다...













